{
  "keyboard_shortcut": "Ctrl+Alt+Shift+T", 
  "name": "ejs_tabstop", 
  "value": [
    "<%", 
    "\t", 
    "    var scimoz   = ko.views.manager.currentView.scimoz;", 
    "\t//alert( scimoz.text );", 
    "\tvar word_cursor = ko.interpolate.getWordUnderCursor(scimoz);", 
    "    var selectedText = scimoz.selText;", 
    "    if (selectedText === '' && word_cursor!=='' ) {", 
    "\t\tscimoz.anchor     = scimoz.wordStartPosition(scimoz.currentPos, true);", 
    "\t\tscimoz.currentPos = scimoz.wordEndPosition(  scimoz.currentPos, true);", 
    "\t\tselectedText = word_cursor; ", 
    "\t}", 
    "", 
    "\t//selectedText = selectedText.replace('%tabstop','%[[%tabstop9: ]]');", 
    "\t//", 
    "\t//if(selectedText=='tabstop') //TODO:  get snippet name uatomaticly by function", 
    "\t//\tselectedText = '';", 
    "\t//", 
    "\tvar tabstop_or_soft\t= selectedText.match(/^\\s*[}\\)\\]\"';]+\\s*$/gi) === null\t? \"tabstop\" : \"soft\";", 
    "\tvar tabstop\t= '[[%~~'+tabstop_or_soft+':'+selectedText+']]';", 
    "\t//", 
    "\t////var tabstop = '[[%[[%tabstop9: ]]tabstop:'+selectedText+']]'", 
    "\t////var tabstop = '[[%[[%tabstop9: ]]tabstop:'+selectedText+']][[%tabstop:]]';", 
    "\t//var tabstop = '[[%[[%tabstop9: ]]'+tabstop_or_soft+':'+selectedText+']][[%tabstop:]]';\t\t\t", 
    "\t//", 
    "\t//ko.extensions.AhkSendKey('delete');", 
    "\t//ko.extensions.AhkSendKey('tab');", 
    "\t", 
    "\tsetTimeout( function(){", 
    "\t\tko.find.replaceAllInMacro(window, 0, '~', '', false, 2, 1, false, false);", 
    "\t}, 100);", 
    "", 
    "ko.views.manager.currentView.scimoz.beginUndoAction()", 
    "try {", 
    "%><%=tabstop%><%\t", 
    "} finally {", 
    "\tko.views.manager.currentView.scimoz.endUndoAction()", 
    "}", 
    "%>!@#_currentPos!@#_anchor"
  ], 
  "set_selection": "false", 
  "version": "1.0.12", 
  "treat_as_ejs": "true", 
  "icon": "file://C://GoogleDrive//Programs//code//Komodo//Icons//filetypes//Komodo//ejs.png", 
  "type": "snippet", 
  "indent_relative": "true", 
  "auto_abbreviation": "true"
}